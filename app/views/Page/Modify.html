{{set . "title" .pageName}}
{{append . "moreScripts" "//cdnjs.cloudflare.com/ajax/libs/codemirror/4.4.0/codemirror.min.js"}}
{{append . "moreScripts" "//cdnjs.cloudflare.com/ajax/libs/codemirror/4.4.0/mode/markdown/markdown.js"}}
{{append . "moreScripts" "//cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"}}
{{append . "moreScripts" "/public/js/editor.js"}}
{{append . "moreStyles" "//cdnjs.cloudflare.com/ajax/libs/codemirror/4.4.0/codemirror.min.css"}}

{{template "header.html" .}}

{{set . "action" "modify"}}

<form method="POST" action="/page/{{rawurlencode .pageName}}/modify">

    <div class="page-header clearfix">
        <a href="/page/{{rawurlencode .pageName}}" class="btn btn-default btn-sm btn-back"><i class="fa fa-arrow-left"></i></a>
        <h1>Editing: {{.pageName}}</h1>
        {{template "Page/actions.html" .}}
    </div>

{{template "flash.html" .}}

    <input type="hidden" name="page.Hash" value="{{.hash}}">

    <!--
    <div class="btn-toolbar clearfix hidden-xs hidden-sm" role="toolbar">
        <button type="button" class="btn btn-default btn-bold"><i class="fa fa-bold"></i></button>
        <button type="button" class="btn btn-default btn-italic"><i class="fa fa-italic"></i></button>
        <button type="button" class="btn btn-default btn-list-ul"><i class="fa fa-list-ul"></i></button>
        <button type="button" class="btn btn-default btn-list-ol"><i class="fa fa-list-ol"></i></button>
        <div class="dropdown">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-header"></i>
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            <li><a href="#h1" class="btn-header" data-header="1" role="menuitem">H1</a></li>
            <li><a href="#h2" class="btn-header" data-header="2" role="menuitem">H2</a></li>
            <li><a href="#h3" class="btn-header" data-header="3" role="menuitem">H3</a></li>
            <li><a href="#h4" class="btn-header" data-header="4" role="menuitem">H4</a></li>
            <li><a href="#h5" class="btn-header" data-header="5" role="menuitem">H5</a></li>
            <li><a href="#h6" class="btn-header" data-header="6" role="menuitem">H6</a></li>
        </ul>
        </div>
        <button type="button" class="btn btn-default btn-chain"><i class="fa fa-chain"></i></button>
        <button type="button" class="btn btn-default btn-quote"><i class="fa fa-quote-left"></i></button>
        <button type="button" class="btn btn-default btn-code"><i class="fa fa-code"></i></button>
    </div>
    -->

    <div class="nav-description hidden-xs hidden-sm clearfix">
        <div class="desc-markdown">
            <span>Markdown</span>
            <a href="#Help" class="btn-help" data-toggle="modal"><i class="fa fa-question-circle"></i></a>
            <a href="#Fullscreen" class="btn-fullscreen"><i class="fa fa-arrows-alt"></i></a>
        </div>
        <div class="desc-preview">
            <span>Preview</span>
        </div>
    </div>

    <ul class="nav nav-tabs visible-sm-block visible-xs-block" role="tablist">
      <li class="active"><a href="#CodeMirror" role="tab" data-toggle="tab">Markdown</a></li>
      <li><a href="#Preview" role="tab" data-toggle="tab">Preview</a></li>
    </ul>

    {{with $field := field "page.Body" .}}
        <div class="editor tab-content clearfix">
            <textarea id="Editor" name="{{$field.Name}}">{{$field.Value}}</textarea>
            <div class="tab-pane" id="Preview"></div>
        </div>
        <span class="error">{{$field.Error}}</span>
    {{end}}

</form>


<div class="modal fade" id="Help" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Markdown Help</h3>
            </div>
            <div class="modal-body">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Result</th>
                            <th>Markdown</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Bold</strong> <em>Emphasize</em> <del>Strike</del></td>
                            <td>**Bold** *Emphasize* ~~Strike~~</td>
                        </tr>
                        <tr>
                            <td><a href="#">Wiki Page Link</a></td>
                            <td>[[Page Name]]</td>
                        </tr>
                        <tr>
                            <td><a href="#">Link</a></td>
                            <td>[title](http://)</td>
                        </tr>
                        <tr>
                            <td><ul><li>List</li></ul></td>
                            <td>* List Item</td>
                        </tr>
                        <tr>
                            <td><ol><li>Ordered List</li></ol></td>
                            <td>1. Ordered List Item</td>
                        </tr>
                        <tr>
                            <td><blockquote>Blockquote</blockquote></td>
                            <td>&gt; Blockquote</td>
                        </tr>
                        <tr>
                            <td>H1</td>
                            <td># Heading</td>
                        </tr>
                        <tr>
                            <td>H2</td>
                            <td>## Heading</td>
                        </tr>
                        <tr>
                            <td>H3</td>
                            <td>### Heading</td>
                        </tr>
                        <tr>
                            <td><code>Inline Code</code></td>
                            <td>`code`</td>
                        </tr>
                    </tbody>
                </table>
                For further Markdown syntax reference: <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown Documentation</a>
            </div>
        </div>
    </div>
</div>

{{template "footer.html" .}}
